<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ÂïÜÂ∫ó‰º†ÈÄÅÈó® StoreLink Pro</title>

  <!-- Flag Icons (MIT) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">

  <style>
    :root{
      --bg:#0b1220;
      --text:#e6edf7;
      --muted:#9fb0cc;
      --line:rgba(255,255,255,.10);

      --chip: rgba(15,23,42,.85);
      --chipActive: rgba(47,129,247,.22);
      --chipActiveLine: rgba(47,129,247,.45);

      --appleBtn: rgba(31,42,68,.55);

      --googleBtn: rgba(17, 96, 59, .22);
      --googleLine: rgba(34, 197, 94, .35);
      --googleText: rgba(34, 197, 94, .95);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 700px at 20% 0%, #1b2a55 0%, var(--bg) 55%);
      color:var(--text);
    }

    .wrap{max-width:1100px;margin:0 auto;padding:18px}

    .header{
      padding:10px 6px 6px 6px;
      margin-bottom:12px;
      text-align:center;
    }
    .title{
      font-size:18px;
      font-weight:850;
      letter-spacing:.2px;
      margin:0;
    }
    .subtitle{
      margin-top:8px;
      font-size:13px;
      color:var(--muted);
      line-height:1.45;
    }

    .searchbar{
      width:100%;
      padding:12px;
      border:1px solid var(--line);
      border-radius:16px;
      background: linear-gradient(180deg, rgba(17,27,46,.78), rgba(15,23,42,.60));
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
    }
    .searchbar input{
      flex:1;
      min-width:220px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(9, 16, 33, .55);
      color:var(--text);
      outline:none;
    }
    .count{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,.14);
      background:rgba(15,23,42,.65);
      padding:6px 10px;
      border-radius:999px;
      white-space:nowrap;
    }

    .chips{
      display:flex;
      gap:10px;
      align-items:center;
      overflow:auto;
      padding:10px 2px 2px 2px;
      scrollbar-width: none;
      width:100%;
    }
    .chips::-webkit-scrollbar{display:none}
    .chip{
      border:1px solid rgba(255,255,255,.14);
      background:var(--chip);
      color:var(--muted);
      padding:7px 12px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
      transition:.12s transform ease, .12s border-color ease, .12s background ease;
    }
    .chip:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.22)}
    .chip.active{
      background:var(--chipActive);
      color:var(--text);
      border-color:var(--chipActiveLine);
    }

    .section{ margin-top:16px; }
    .section h2{
      margin:0 0 10px 0;
      font-size:13px;
      color:rgba(230,237,247,.92);
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap:12px;
    }
    .card{
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      background: linear-gradient(180deg, rgba(17,27,46,.80), rgba(15,23,42,.62));
      box-shadow: 0 12px 34px rgba(0,0,0,.24);
    }
    .row{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      margin-bottom:12px;
    }
    .region{
      display:flex;align-items:center;gap:10px;
      font-size:14px;font-weight:780;
    }

    .flag{
      width:22px;height:16px;border-radius:4px;overflow:hidden;
      box-shadow: 0 0 0 1px rgba(255,255,255,.12) inset;
      flex:0 0 auto;
    }
    .flag .fi{width:100%;height:100%;display:block}

    .code{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,.14);
      background:rgba(15,23,42,.60);
      padding:5px 10px;
      border-radius:999px;
      white-space:nowrap;
      font-weight:700;
      letter-spacing:.5px;
    }

    a{ color:inherit; }
    .btns{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .btn{
      text-decoration:none;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:11px 12px;
      border-radius:14px;
      font-size:13px;
      font-weight:750;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(31,42,68,.55);
      color:var(--text);
      transition:.12s transform ease, .12s background ease, .12s border-color ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.22)}
    .btn.apple{background:var(--appleBtn)}
    .btn.google{
      background: var(--googleBtn);
      border-color: var(--googleLine);
      color: var(--googleText);
    }

    .icon{
      width:16px;height:16px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      flex:0 0 auto;
    }
    .icon svg{width:16px;height:16px;display:block;fill:currentColor}

    .empty{
      margin-top:14px;
      padding:16px;
      border:1px dashed rgba(255,255,255,.18);
      border-radius:18px;
      color:var(--muted);
      background:rgba(17,27,46,.35)
    }

    .footer{
      margin-top:26px;
      color:rgba(159,176,204,.75);
      font-size:12px;
      text-align:center;
    }
    .hr{
      height:1px;
      background:rgba(255,255,255,.10);
      border:0;
      margin:18px 0 10px 0;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="title">ÂïÜÂ∫ó‰º†ÈÄÅÈó® StoreLink Pro</div>
      <div class="subtitle">Êú¨È°µÈù¢Áî±Êµ∑Â§ñPMÂà∂‰ΩúÔºåÁî®‰∫éÊü•ÁúãÂØπÂ∫îÂú∞Âå∫ÂïÜÂ∫óÈ°µ„ÄÅ‰∫ßÂìÅÂíåÊé®Ëçê‰ø°ÊÅØÔºåÊó†Ê≥ïÁî®‰∫é‰∏ãËΩΩAppÔºåËØ∑Áü•ÊÇâ</div>
    </div>

    <div class="searchbar">
      <input id="q" type="text" placeholder="ÊêúÁ¥¢ÂõΩÂÆ∂Êàñ‰ª£Á†ÅÔºà‰æãÂ¶ÇÔºöUSÔºåÊó•Êú¨Ôºâ" autocomplete="off" />
      <span class="count" id="countPill">ÂÖ± 0 ‰∏™Âú∞Âå∫</span>
      <div class="chips" id="chips"></div>
    </div>

    <div id="content"></div>
    <div id="empty" class="empty" style="display:none;">Ê≤°ÊúâÂåπÈÖçÁªìÊûú</div>

    <div class="footer">
      <hr class="hr" />
      Designed by Global Publishing PM
    </div>
  </div>

  <script>
    // =========================
    // Link templates
    // =========================
    const APP_ID = "899247664";
    const IOS_URL_TPL = (dsf, cc) =>
      `https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=${dsf}&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=${APP_ID}&cc=${cc}&urlDesc=`;
    const GP_URL_TPL = (hl, gl) =>
      `https://play.google.com/store/games?device=phone&hl=${encodeURIComponent(hl)}&gl=${encodeURIComponent(gl)}`;
    const APPLE_PC_TPL = (cc) =>
      `https://apps.apple.com/${cc}/iphone/today`;

    // =========================
    // iOS detection for Apple smart jump
    // =========================
    function isLikelyIOS(){
      const ua = navigator.userAgent || "";
      const platform = navigator.platform || "";
      const maxTP = navigator.maxTouchPoints || 0;

      if (/iPad|iPhone|iPod/i.test(ua)) return true;
      if (platform === "MacIntel" && maxTP > 1) return true; // iPadOS 13+
      return false;
    }

    // IMPORTANT (stability):
    // - NO fallback to location.assign after window.open
    //   to avoid "double open" on some browsers.
    function openNewTabNoFallback(url){
      const w = window.open(url, "_blank");
      try { if (w) w.opener = null; } catch(e) {}
    }

    function openSmartApple(event, region){
      const iosUrl = IOS_URL_TPL(region.dsf, region.cc);
      const pcUrl  = APPLE_PC_TPL(region.cc);
      const guessedIOS = isLikelyIOS();

      // Manual override (for testing): Alt/Option click
      const forcePick = event && (event.altKey || (event.metaKey && event.shiftKey));
      if (forcePick){
        const choice = window.prompt(
          `„Äê${region.cn}„ÄëÈÄâÊã©Ë¶ÅÊâìÂºÄÁöÑ Apple ÈìæÊé•Ôºö\n1 = AppStoreÔºàiOS ‰∏ìÁî®Ôºâ\n2 = AppleÔºàPCÔºâ\n\nËæìÂÖ• 1 Êàñ 2Ôºö`,
          guessedIOS ? "1" : "2"
        );
        if (choice === "1") window.location.assign(iosUrl);
        else if (choice === "2") openNewTabNoFallback(pcUrl);
        return false;
      }

      // iOS: use same-tab navigation to avoid Edge iOS leaving about:blank tabs
      if (guessedIOS) window.location.assign(iosUrl);
      else openNewTabNoFallback(pcUrl);

      return false;
    }

    // ===== Icons (inline SVG, use currentColor) =====
    const ICON_APPLE = `
      <span class="icon" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M16.7 13.2c0-2.2 1.8-3.2 1.9-3.3c-1-1.5-2.6-1.7-3.1-1.7c-1.3-.1-2.5.8-3.1.8c-.6 0-1.6-.8-2.7-.8c-1.4 0-2.7.8-3.4 2.1c-1.5 2.6-.4 6.4 1.1 8.5c.7 1 1.5 2.1 2.6 2.1c1 0 1.4-.7 2.6-.7c1.2 0 1.5.7 2.7.7c1.1 0 1.8-1 2.5-2c.8-1.1 1.1-2.2 1.1-2.2c0-.1-2.2-.9-2.2-3.5z"/>
          <path d="M14.9 6.6c.6-.8 1-1.9.9-3c-.9.1-2 .6-2.7 1.4c-.6.7-1.1 1.8-.9 2.9c1 .1 2-.5 2.7-1.3z"/>
        </svg>
      </span>
    `;
    const ICON_GOOGLE_PLAY = `
      <span class="icon" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M4 3.5v17c0 .8.9 1.3 1.6.9l14.4-8.5c.7-.4.7-1.4 0-1.8L5.6 2.6C4.9 2.2 4 2.7 4 3.5z"/>
        </svg>
      </span>
    `;

    // =========================
    // Data
    // =========================
    const regions = [
  { code: "CN", cn: "‰∏≠ÂõΩ", cc: "cn", dsf: "143465", hl: "zh_CN", group: "‰∏ú‰∫ö" },
  { code: "TW", cn: "‰∏≠ÂõΩÂè∞Êπæ", cc: "tw", dsf: "143470", hl: "zh_TW", group: "‰∏ú‰∫ö" },
  { code: "MO", cn: "‰∏≠ÂõΩÊæ≥Èó®", cc: "mo", dsf: "143515", hl: "zh_HK", group: "‰∏ú‰∫ö" },
  { code: "HK", cn: "‰∏≠ÂõΩÈ¶ôÊ∏Ø", cc: "hk", dsf: "143463", hl: "zh_HK", group: "‰∏ú‰∫ö" },
  { code: "JP", cn: "Êó•Êú¨", cc: "jp", dsf: "143462", hl: "ja", group: "‰∏ú‰∫ö" },
  { code: "MN", cn: "ËíôÂè§ÂõΩ", cc: "mn", dsf: "143592", hl: "en", group: "‰∏ú‰∫ö" },
  { code: "KR", cn: "Èü©ÂõΩ", cc: "kr", dsf: "143466", hl: "ko", group: "‰∏ú‰∫ö" },
  { code: "ID", cn: "Âç∞Â∞º", cc: "id", dsf: "143476", hl: "id", group: "‰∏úÂçó‰∫ö" },
  { code: "BN", cn: "ÊñáËé±", cc: "bn", dsf: "143560", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "SG", cn: "Êñ∞Âä†Âù°", cc: "sg", dsf: "143464", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "KH", cn: "Êü¨ÂüîÂØ®", cc: "kh", dsf: "143579", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "TH", cn: "Ê≥∞ÂõΩ", cc: "th", dsf: "143475", hl: "th", group: "‰∏úÂçó‰∫ö" },
  { code: "LA", cn: "ËÄÅÊåù", cc: "la", dsf: "143587", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "PH", cn: "Ëè≤ÂæãÂÆæ", cc: "ph", dsf: "143474", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "VN", cn: "Ë∂äÂçó", cc: "vn", dsf: "143471", hl: "vi", group: "‰∏úÂçó‰∫ö" },
  { code: "MY", cn: "È©¨Êù•Ë•ø‰∫ö", cc: "my", dsf: "143473", hl: "en", group: "‰∏úÂçó‰∫ö" },
  { code: "BZ", cn: "‰ºØÂà©ÂÖπ", cc: "bz", dsf: "143555", hl: "en", group: "ÂåóÁæé" },
  { code: "CA", cn: "Âä†ÊãøÂ§ß", cc: "ca", dsf: "143455", hl: "en", group: "ÂåóÁæé" },
  { code: "GT", cn: "Âç±Âú∞È©¨Êãâ", cc: "gt", dsf: "143504", hl: "es", group: "ÂåóÁæé" },
  { code: "CR", cn: "Âì•ÊñØËææÈªéÂä†", cc: "cr", dsf: "143495", hl: "es", group: "ÂåóÁæé" },
  { code: "LC", cn: "Âú£Âç¢Ë•ø‰∫ö", cc: "lc", dsf: "143549", hl: "en", group: "ÂåóÁæé" },
  { code: "KN", cn: "Âú£Âü∫Ëå®ÂíåÂ∞ºÁª¥ÊñØ", cc: "kn", dsf: "143548", hl: "en", group: "ÂåóÁæé" },
  { code: "VC", cn: "Âú£ÊñáÊ£ÆÁâπÂíåÊ†ºÊûóÁ∫≥‰∏ÅÊñØ", cc: "vc", dsf: "143550", hl: "en", group: "ÂåóÁæé" },
  { code: "GY", cn: "Âú≠‰∫öÈÇ£", cc: "gy", dsf: "143553", hl: "en", group: "ÂåóÁæé" },
  { code: "MX", cn: "Â¢®Ë•øÂì•", cc: "mx", dsf: "143468", hl: "es", group: "ÂåóÁæé" },
  { code: "DM", cn: "Â§öÁ±≥Â∞ºÂÖã", cc: "dm", dsf: "143545", hl: "en", group: "ÂåóÁæé" },
  { code: "DO", cn: "Â§öÁ±≥Â∞ºÂä†", cc: "do", dsf: "143508", hl: "es", group: "ÂåóÁæé" },
  { code: "AI", cn: "ÂÆâÂú≠Êãâ", cc: "ai", dsf: "143538", hl: "en", group: "ÂåóÁæé" },
  { code: "AG", cn: "ÂÆâÊèêÁìúÂíåÂ∑¥Â∏ÉËææ", cc: "ag", dsf: "143540", hl: "en", group: "ÂåóÁæé" },
  { code: "NI", cn: "Â∞ºÂä†ÊãâÁìú", cc: "ni", dsf: "143512", hl: "es", group: "ÂåóÁæé" },
  { code: "BS", cn: "Â∑¥ÂìàÈ©¨", cc: "bs", dsf: "143539", hl: "en", group: "ÂåóÁæé" },
  { code: "BB", cn: "Â∑¥Â∑¥Â§öÊñØ", cc: "bb", dsf: "143541", hl: "en", group: "ÂåóÁæé" },
  { code: "PA", cn: "Â∑¥ÊãøÈ©¨", cc: "pa", dsf: "143485", hl: "es", group: "ÂåóÁæé" },
  { code: "KY", cn: "ÂºÄÊõºÁæ§Â≤õ", cc: "ky", dsf: "143544", hl: "en", group: "ÂåóÁæé" },
  { code: "GD", cn: "Ê†ºÊûóÁ∫≥Ëææ", cc: "gd", dsf: "143546", hl: "en", group: "ÂåóÁæé" },
  { code: "HN", cn: "Ê¥™ÈÉΩÊãâÊñØ", cc: "hn", dsf: "143510", hl: "es", group: "ÂåóÁæé" },
  { code: "JM", cn: "Áâô‰π∞Âä†", cc: "jm", dsf: "143511", hl: "en", group: "ÂåóÁæé" },
  { code: "TC", cn: "ÁâπÂÖãÊñØÂíåÂáØÁßëÊñØÁæ§Â≤õ", cc: "tc", dsf: "143552", hl: "en", group: "ÂåóÁæé" },
  { code: "TT", cn: "ÁâπÁ´ãÂ∞ºËææÂíåÂ§öÂ∑¥Âì•", cc: "tt", dsf: "143551", hl: "en", group: "ÂåóÁæé" },
  { code: "BM", cn: "ÁôæÊÖïÂ§ß", cc: "bm", dsf: "143542", hl: "en", group: "ÂåóÁæé" },
  { code: "US", cn: "ÁæéÂõΩ", cc: "us", dsf: "143441", hl: "en", group: "ÂåóÁæé" },
  { code: "VG", cn: "Ëã±Â±ûÁª¥Â∞î‰∫¨Áæ§Â≤õ", cc: "vg", dsf: "143543", hl: "en", group: "ÂåóÁæé" },
  { code: "SV", cn: "Ëê®Â∞îÁì¶Â§ö", cc: "sv", dsf: "143506", hl: "es", group: "ÂåóÁæé" },
  { code: "MS", cn: "ËíôÁâπÂ°ûÊãâÁâπ", cc: "ms", dsf: "143547", hl: "en", group: "ÂåóÁæé" },
  { code: "BT", cn: "‰∏ç‰∏π", cc: "bt", dsf: "143577", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "UZ", cn: "‰πåÂÖπÂà´ÂÖãÊñØÂù¶", cc: "uz", dsf: "143566", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "IN", cn: "Âç∞Â∫¶", cc: "in", dsf: "143467", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "KG", cn: "ÂêâÂ∞îÂêâÊñØÊñØÂù¶", cc: "kg", dsf: "143586", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "KZ", cn: "ÂìàËê®ÂÖãÊñØÂù¶", cc: "kz", dsf: "143517", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "TM", cn: "ÂúüÂ∫ìÊõºÊñØÂù¶", cc: "tm", dsf: "143604", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "TJ", cn: "Â°îÂêâÂÖãÊñØÂù¶", cc: "tj", dsf: "143603", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "NP", cn: "Â∞ºÊ≥äÂ∞î", cc: "np", dsf: "143484", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "PK", cn: "Â∑¥Âü∫ÊñØÂù¶", cc: "pk", dsf: "143477", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "LK", cn: "ÊñØÈáåÂÖ∞Âç°", cc: "lk", dsf: "143486", hl: "en", group: "Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
  { code: "FM", cn: "ÂØÜÂÖãÁΩóÂ∞ºË•ø‰∫öËÅîÈÇ¶", cc: "fm", dsf: "143591", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "PG", cn: "Â∑¥Â∏É‰∫öÊñ∞Âá†ÂÜÖ‰∫ö", cc: "pg", dsf: "143597", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "PW", cn: "Â∏ïÂä≥", cc: "pw", dsf: "143595", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "SB", cn: "ÊâÄÁΩóÈó®Áæ§Â≤õ", cc: "sb", dsf: "143601", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "FJ", cn: "ÊñêÊµé", cc: "fj", dsf: "143583", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "NZ", cn: "Êñ∞Ë•øÂÖ∞", cc: "nz", dsf: "143461", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "AU", cn: "Êæ≥Â§ßÂà©‰∫ö", cc: "au", dsf: "143460", hl: "en", group: "Â§ßÊ¥ãÊ¥≤" },
  { code: "UY", cn: "‰πåÊãâÂú≠", cc: "uy", dsf: "143514", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "EC", cn: "ÂéÑÁìúÂ§öÂ∞î", cc: "ec", dsf: "143509", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "CO", cn: "Âì•‰º¶ÊØî‰∫ö", cc: "co", dsf: "143501", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "VE", cn: "ÂßîÂÜÖÁëûÊãâ", cc: "ve", dsf: "143502", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "PY", cn: "Â∑¥ÊãâÂú≠", cc: "py", dsf: "143513", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "BR", cn: "Â∑¥Ë•ø", cc: "br", dsf: "143503", hl: "pt_BR", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "CL", cn: "Êô∫Âà©", cc: "cl", dsf: "143483", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "BO", cn: "ÁéªÂà©Áª¥‰∫ö", cc: "bo", dsf: "143556", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "PE", cn: "ÁßòÈ≤Å", cc: "pe", dsf: "143507", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "SR", cn: "ËãèÈáåÂçó", cc: "sr", dsf: "143554", hl: "en", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "AR", cn: "ÈòøÊ†πÂª∑", cc: "ar", dsf: "143505", hl: "es", group: "Êãâ‰∏ÅÁæéÊ¥≤" },
  { code: "DK", cn: "‰∏πÈ∫¶", cc: "dk", dsf: "143458", hl: "da", group: "Ê¨ßÊ¥≤" },
  { code: "UA", cn: "‰πåÂÖãÂÖ∞", cc: "ua", dsf: "143492", hl: "uk", group: "Ê¨ßÊ¥≤" },
  { code: "AM", cn: "‰∫öÁæéÂ∞º‰∫ö", cc: "am", dsf: "143524", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "RU", cn: "‰øÑÁΩóÊñØ", cc: "ru", dsf: "143469", hl: "ru", group: "Ê¨ßÊ¥≤" },
  { code: "BG", cn: "‰øùÂä†Âà©‰∫ö", cc: "bg", dsf: "143526", hl: "bg", group: "Ê¨ßÊ¥≤" },
  { code: "HR", cn: "ÂÖãÁΩóÂú∞‰∫ö", cc: "hr", dsf: "143494", hl: "hr", group: "Ê¨ßÊ¥≤" },
  { code: "IS", cn: "ÂÜ∞Â≤õ", cc: "is", dsf: "143558", hl: "is", group: "Ê¨ßÊ¥≤" },
  { code: "HU", cn: "ÂåàÁâôÂà©", cc: "hu", dsf: "143482", hl: "hu", group: "Ê¨ßÊ¥≤" },
  { code: "MK", cn: "ÂåóÈ©¨ÂÖ∂È°ø", cc: "mk", dsf: "143530", hl: "mk", group: "Ê¨ßÊ¥≤" },
  { code: "LU", cn: "Âç¢Ê£ÆÂ†°", cc: "lu", dsf: "143451", hl: "fr", group: "Ê¨ßÊ¥≤" },
  { code: "CY", cn: "Â°ûÊµ¶Ë∑ØÊñØ", cc: "cy", dsf: "143557", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "AT", cn: "Â••Âú∞Âà©", cc: "at", dsf: "143445", hl: "de", group: "Ê¨ßÊ¥≤" },
  { code: "GR", cn: "Â∏åËÖä", cc: "gr", dsf: "143448", hl: "el", group: "Ê¨ßÊ¥≤" },
  { code: "DE", cn: "Âæ∑ÂõΩ", cc: "de", dsf: "143443", hl: "de", group: "Ê¨ßÊ¥≤" },
  { code: "IT", cn: "ÊÑèÂ§ßÂà©", cc: "it", dsf: "143450", hl: "it", group: "Ê¨ßÊ¥≤" },
  { code: "LV", cn: "ÊãâËÑ±Áª¥‰∫ö", cc: "lv", dsf: "143519", hl: "lv", group: "Ê¨ßÊ¥≤" },
  { code: "NO", cn: "Êå™Â®Å", cc: "no", dsf: "143457", hl: "no", group: "Ê¨ßÊ¥≤" },
  { code: "CZ", cn: "Êç∑ÂÖã", cc: "cz", dsf: "143489", hl: "cs", group: "Ê¨ßÊ¥≤" },
  { code: "MD", cn: "Êë©Â∞îÂ§öÁì¶", cc: "md", dsf: "143523", hl: "ro", group: "Ê¨ßÊ¥≤" },
  { code: "SK", cn: "ÊñØÊ¥õ‰ºêÂÖã", cc: "sk", dsf: "143496", hl: "sk", group: "Ê¨ßÊ¥≤" },
  { code: "SI", cn: "ÊñØÊ¥õÊñáÂ∞º‰∫ö", cc: "si", dsf: "143499", hl: "sl", group: "Ê¨ßÊ¥≤" },
  { code: "BE", cn: "ÊØîÂà©Êó∂", cc: "be", dsf: "143446", hl: "fr", group: "Ê¨ßÊ¥≤" },
  { code: "FR", cn: "Ê≥ïÂõΩ", cc: "fr", dsf: "143442", hl: "fr", group: "Ê¨ßÊ¥≤" },
  { code: "PL", cn: "Ê≥¢ÂÖ∞", cc: "pl", dsf: "143478", hl: "pl", group: "Ê¨ßÊ¥≤" },
  { code: "IE", cn: "Áà±Â∞îÂÖ∞", cc: "ie", dsf: "143449", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "EE", cn: "Áà±Ê≤ôÂ∞º‰∫ö", cc: "ee", dsf: "143518", hl: "et", group: "Ê¨ßÊ¥≤" },
  { code: "SE", cn: "ÁëûÂÖ∏", cc: "se", dsf: "143456", hl: "sv", group: "Ê¨ßÊ¥≤" },
  { code: "CH", cn: "ÁëûÂ£´", cc: "ch", dsf: "143459", hl: "de", group: "Ê¨ßÊ¥≤" },
  { code: "BY", cn: "ÁôΩ‰øÑÁΩóÊñØ", cc: "by", dsf: "143565", hl: "ru", group: "Ê¨ßÊ¥≤" },
  { code: "LT", cn: "Á´ãÈô∂ÂÆõ", cc: "lt", dsf: "143520", hl: "lt", group: "Ê¨ßÊ¥≤" },
  { code: "RO", cn: "ÁΩóÈ©¨Â∞º‰∫ö", cc: "ro", dsf: "143487", hl: "ro", group: "Ê¨ßÊ¥≤" },
  { code: "FI", cn: "Ëä¨ÂÖ∞", cc: "fi", dsf: "143447", hl: "fi", group: "Ê¨ßÊ¥≤" },
  { code: "GB", cn: "Ëã±ÂõΩ", cc: "gb", dsf: "143444", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "NL", cn: "Ëç∑ÂÖ∞", cc: "nl", dsf: "143452", hl: "nl", group: "Ê¨ßÊ¥≤" },
  { code: "PT", cn: "Ëë°ËêÑÁâô", cc: "pt", dsf: "143453", hl: "pt", group: "Ê¨ßÊ¥≤" },
  { code: "ES", cn: "Ë•øÁè≠Áâô", cc: "es", dsf: "143454", hl: "es", group: "Ê¨ßÊ¥≤" },
  { code: "AZ", cn: "ÈòøÂ°ûÊãúÁñÜ", cc: "az", dsf: "143568", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "AL", cn: "ÈòøÂ∞îÂ∑¥Â∞º‰∫ö", cc: "al", dsf: "143575", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "MT", cn: "È©¨ËÄ≥‰ªñ", cc: "mt", dsf: "143521", hl: "en", group: "Ê¨ßÊ¥≤" },
  { code: "UG", cn: "‰πåÂπ≤Ëææ", cc: "ug", dsf: "143537", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "TD", cn: "‰πçÂæó", cc: "td", dsf: "143581", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "YE", cn: "‰πüÈó®", cc: "ye", dsf: "143571", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "IL", cn: "‰ª•Ëâ≤Âàó", cc: "il", dsf: "143491", hl: "he", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "CV", cn: "‰ΩõÂæóËßí", cc: "cv", dsf: "143580", hl: "pt", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "GM", cn: "ÂÜàÊØî‰∫ö", cc: "gm", dsf: "143584", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "GW", cn: "Âá†ÂÜÖ‰∫öÊØîÁªç", cc: "gw", dsf: "143585", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "CG", cn: "ÂàöÊûúÔºàÂ∏ÉÔºâ", cc: "cg", dsf: "143582", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "LR", cn: "Âà©ÊØîÈáå‰∫ö", cc: "lr", dsf: "143588", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "GH", cn: "Âä†Á∫≥", cc: "gh", dsf: "143573", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "ZA", cn: "ÂçóÈùû", cc: "za", dsf: "143472", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "BW", cn: "ÂçöËå®Áì¶Á∫≥", cc: "bw", dsf: "143525", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "QA", cn: "Âç°Â°îÂ∞î", cc: "qa", dsf: "143498", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "TR", cn: "ÂúüËÄ≥ÂÖ∂", cc: "tr", dsf: "143480", hl: "tr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "ST", cn: "Âú£Â§öÁæéÂíåÊôÆÊûóË•øÊØî", cc: "st", dsf: "143598", hl: "pt", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "TZ", cn: "Âù¶Ê°ëÂ∞º‰∫ö", cc: "tz", dsf: "143572", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "EG", cn: "ÂüÉÂèä", cc: "eg", dsf: "143516", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "SN", cn: "Â°ûÂÜÖÂä†Â∞î", cc: "sn", dsf: "143535", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "SL", cn: "Â°ûÊãâÂà©ÊòÇ", cc: "sl", dsf: "143600", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "SC", cn: "Â°ûËàåÂ∞î", cc: "sc", dsf: "143599", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "AO", cn: "ÂÆâÂì•Êãâ", cc: "ao", dsf: "143564", hl: "pt", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "NG", cn: "Â∞ºÊó•Âà©‰∫ö", cc: "ng", dsf: "143561", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "NE", cn: "Â∞ºÊó•Â∞î", cc: "ne", dsf: "143534", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "BH", cn: "Â∑¥Êûó", cc: "bh", dsf: "143559", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "BF", cn: "Â∏ÉÂü∫Á∫≥Ê≥ïÁ¥¢", cc: "bf", dsf: "143578", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "SZ", cn: "ÊñØÂ®ÅÂ£´ÂÖ∞", cc: "sz", dsf: "143602", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "MR", cn: "ÊØõÈáåÂ°îÂ∞º‰∫ö", cc: "mr", dsf: "143590", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "MU", cn: "ÊØõÈáåÊ±ÇÊñØ", cc: "mu", dsf: "143533", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "SA", cn: "Ê≤ôÁâπÈòøÊãâ‰ºØ", cc: "sa", dsf: "143479", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "ZW", cn: "Ê¥•Â∑¥Â∏ÉÈü¶", cc: "zw", dsf: "143605", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "KW", cn: "ÁßëÂ®ÅÁâπ", cc: "kw", dsf: "143493", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "TN", cn: "Á™ÅÂ∞ºÊñØ", cc: "tn", dsf: "143536", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "JO", cn: "Á∫¶Êó¶", cc: "jo", dsf: "143528", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "NA", cn: "Á∫≥Á±≥ÊØî‰∫ö", cc: "na", dsf: "143594", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "KE", cn: "ËÇØÂ∞º‰∫ö", cc: "ke", dsf: "143529", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "MZ", cn: "Ëé´Ê°ëÊØîÂÖã", cc: "mz", dsf: "143593", hl: "pt", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "BJ", cn: "Ë¥ùÂÆÅ", cc: "bj", dsf: "143576", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "DZ", cn: "ÈòøÂ∞îÂèäÂà©‰∫ö", cc: "dz", dsf: "143563", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "OM", cn: "ÈòøÊõº", cc: "om", dsf: "143562", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "AE", cn: "ÈòøËÅîÈÖã", cc: "ae", dsf: "143481", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "MW", cn: "È©¨ÊãâÁª¥", cc: "mw", dsf: "143589", hl: "en", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "MG", cn: "È©¨ËææÂä†ÊñØÂä†", cc: "mg", dsf: "143531", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "ML", cn: "È©¨Èáå", cc: "ml", dsf: "143532", hl: "fr", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
  { code: "LB", cn: "ÈªéÂ∑¥Â´©", cc: "lb", dsf: "143497", hl: "ar", group: "ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" }
];

    // Hot list (manual order required)
    const hotCodesOrdered = ["CN","US","JP","KR","TW","GB","DE","TH","BR"];
    const hotSet = new Set(hotCodesOrdered);

    const chipDefs = [
      { id:"ALL", label:"ÂÖ®ÈÉ®" },
      { id:"HOT", label:"üî• ÁÉ≠Èó®" },
      { id:"ÂåóÁæé", label:"ÂåóÁæé" },
      { id:"‰∏ú‰∫ö", label:"‰∏ú‰∫ö" },
      { id:"‰∏úÂçó‰∫ö", label:"‰∏úÂçó‰∫ö" },
      { id:"Âçó‰∫ö‰∏é‰∏≠‰∫ö", label:"Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
      { id:"Ê¨ßÊ¥≤", label:"Ê¨ßÊ¥≤" },
      { id:"Êãâ‰∏ÅÁæéÊ¥≤", label:"Êãâ‰∏ÅÁæéÊ¥≤" },
      { id:"Â§ßÊ¥ãÊ¥≤", label:"Â§ßÊ¥ãÊ¥≤" },
      { id:"ÈùûÊ¥≤‰∏é‰∏≠‰∏ú", label:"ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
    ];

    const sectionOrder = [
      { id:"HOT", title:"üî• ÁÉ≠Èó®" },
      { id:"ÂåóÁæé", title:"ÂåóÁæé" },
      { id:"‰∏ú‰∫ö", title:"‰∏ú‰∫ö" },
      { id:"‰∏úÂçó‰∫ö", title:"‰∏úÂçó‰∫ö" },
      { id:"Âçó‰∫ö‰∏é‰∏≠‰∫ö", title:"Âçó‰∫ö‰∏é‰∏≠‰∫ö" },
      { id:"Ê¨ßÊ¥≤", title:"Ê¨ßÊ¥≤" },
      { id:"Êãâ‰∏ÅÁæéÊ¥≤", title:"Êãâ‰∏ÅÁæéÊ¥≤" },
      { id:"Â§ßÊ¥ãÊ¥≤", title:"Â§ßÊ¥ãÊ¥≤" },
      { id:"ÈùûÊ¥≤‰∏é‰∏≠‰∏ú", title:"ÈùûÊ¥≤‰∏é‰∏≠‰∏ú" },
    ];

    let activeChip = "ALL";

    function renderChips(){
      const el = document.getElementById("chips");
      el.innerHTML = chipDefs.map(c =>
        `<div class="chip ${c.id===activeChip?'active':''}" data-chip="${c.id}">${c.label}</div>`
      ).join("");

      el.querySelectorAll(".chip").forEach(chip => {
        chip.addEventListener("click", () => {
          activeChip = chip.getAttribute("data-chip");
          render();
        });
      });
    }

    function matchesSearch(r, q){
      if(!q) return true;
      const raw = q.trim();
      const s = raw.toLowerCase();
      if(!s) return true;
      return r.code.toLowerCase().includes(s) || r.cn.includes(raw);
    }

    function flagHTML(cc){
      return `<span class="flag"><span class="fi fi-${cc}"></span></span>`;
    }

    function cardHTML(r){
      const label = `${flagHTML(r.cc)}<span>${r.cn}</span>`;
      const gpUrl = GP_URL_TPL(r.hl, r.cc);
      const payload = JSON.stringify({dsf:r.dsf, cc:r.cc, cn:r.cn});

      return `
        <div class="card">
          <div class="row">
            <div class="region">${label}</div>
            <div class="code">${r.code}</div>
          </div>

          <div class="btns">
            <a class="btn apple" href="#"
               title="AppStore"
               onclick='return openSmartApple(event, ${payload})'>
              ${ICON_APPLE}<span>Apple</span>
            </a>

            <a class="btn google" href="${gpUrl}"
               title="GooglePlay"
               target="_blank" rel="noopener noreferrer">
              ${ICON_GOOGLE_PLAY}<span>Google</span>
            </a>
          </div>
        </div>
      `;
    }

    function sectionHTML(title, cards){
      if (!cards.length) return "";
      return `
        <div class="section">
          <h2>${title}</h2>
          <div class="grid">${cards.join("")}</div>
        </div>
      `;
    }

    function buildHotList(filtered){
      const byCode = new Map(filtered.map(r => [r.code, r]));
      const list = [];
      for (const code of hotCodesOrdered){
        const r = byCode.get(code);
        if (r) list.push(r);
      }
      return list;
    }

    function render(){
      renderChips();

      const q = document.getElementById("q").value || "";

      // Filter by search first
      const filtered = regions.filter(r => matchesSearch(r, q));

      // For region sections, we still want stable display order:
      const filteredSortedZh = filtered.slice().sort((a,b) => a.cn.localeCompare(b.cn, "zh"));

      const content = [];
      const contentEl = document.getElementById("content");
      const emptyEl = document.getElementById("empty");

      if (activeChip === "ALL"){
        // 1) Hot section (manual order)
        const hotList = buildHotList(filtered);
        content.push(sectionHTML("üî• ÁÉ≠Èó®", hotList.map(cardHTML)));

        // 2) Region sections (IMPORTANT: include hot regions again)
        for (const s of sectionOrder){
          if (s.id === "HOT") continue;
          const list = filteredSortedZh.filter(r => r.group === s.id);
          content.push(sectionHTML(s.title, list.map(cardHTML)));
        }

        // Count = unique regions (no double count)
        document.getElementById("countPill").textContent = `ÂÖ± ${filteredSortedZh.length} ‰∏™Âú∞Âå∫`;
      } else if (activeChip === "HOT"){
        const hotList = buildHotList(filtered);
        content.push(sectionHTML("üî• ÁÉ≠Èó®", hotList.map(cardHTML)));
        document.getElementById("countPill").textContent = `ÂÖ± ${hotList.length} ‰∏™Âú∞Âå∫`;
      } else {
        const list = filteredSortedZh.filter(r => r.group === activeChip);
        content.push(sectionHTML(activeChip, list.map(cardHTML)));
        document.getElementById("countPill").textContent = `ÂÖ± ${list.length} ‰∏™Âú∞Âå∫`;
      }

      const html = content.join("");
      contentEl.innerHTML = html;

      const hasCard = contentEl.querySelector(".card");
      if (!hasCard){
        contentEl.innerHTML = "";
        emptyEl.style.display = "block";
      } else {
        emptyEl.style.display = "none";
      }
    }

    document.getElementById("q").addEventListener("input", render);
    render();
  </script>
</body>
</html>
